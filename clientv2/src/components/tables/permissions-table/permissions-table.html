<div class="m-4">
  <p-button (onClick)="showCreateDialog()" label="créer permission"  icon="pi pi-plus" iconPos="right" [raised]="true"  severity="info" class="mx-3"/>
</div>
<p-table
    [paginator]="true"
    [rows]="5"
    [value]="permissions"
    stripedRows
    showGridlines
    [tableStyle]="{'min-width': '50rem'}">
    <ng-template #header>
        <tr>
            <th>nom</th>
            <th>description</th>
            <th>actions</th>
        </tr>
    </ng-template>
    <ng-template #body let-permission>
        <tr>
            <td>{{permission.nom}}</td>
            <td>{{permission.description}}</td>
            <td>
                <p-button (onClick)="showEditDialog(permission)"  icon="pi pi-pencil" [rounded]="true" [raised]="true"  severity="info" class="mx-3"/>
                <p-button (onClick)="deletePermession(permission.id)"  icon="pi pi-trash" [rounded]="true" [raised]="true"  severity="danger"/>
            </td>
        </tr>
    </ng-template>
</p-table>

    <!-- permission creat form popup -->
    <p-dialog header="créer cette permission" [modal]="true" [(visible)]="visible_create" [blockScroll]="true" [style]="{ width: '30rem' }">
        <form [formGroup]="fg" (ngSubmit)="create()"  class="w-full p-4 border border-gray-300 bg-white" action="#" method="post">
            <div class="grid grid-cols-2 gap-5 text-black">

              <!-- nom -->
              <div>
                <label class="block mb-2 text-sm font-medium" for="">nom</label>
                <input type="text" formControlName="nom" name="nom" class="block w-full p-2.5 text-sm bg-white border-gray-300 border rounded-lg focus:ring-blue-500 focus:border-blue-500"/>
              </div>

              <!--role-->
              <div>
                <label class="block mb-2 text-sm font-medium" for="">roles</label>
                <p-multiselect [options]="roles" optionValue="id" formControlName="selectedRolesIds" optionLabel="nom" placeholder="sélectionner" [fluid]="true" [filter]="false" [maxSelectedLabels]="1" class="w-full md:w-80" />
              </div>

              <!-- description -->
              <div>
                <label class="block mb-2 text-sm font-medium" for="">description</label>
                <textarea formControlName="description" name="description" class="block w-full p-2.5 text-sm bg-white border-gray-300 border rounded-lg focus:ring-blue-500 focus:border-blue-500" ></textarea>
              </div>


            </div>
            <button type="submit" class="w-full mt-5 rounded-md bg-blue-600 text-center py-3 text-white">
              créer
            </button>
          </form>
    </p-dialog>
    <!-- end permission creat form popup -->

    <!-- permission edit form popup -->
    <p-dialog header="modifier cette permission" [modal]="true" [(visible)]="visible_edit" [style]="{ width: '30rem' }">
        <form [formGroup]="fg" (ngSubmit)="edit($event)"  class="w-full p-4 border border-gray-300 bg-white" action="#" method="post">
            <div class="grid grid-cols-2 gap-5 text-black">

              <!-- nom -->
              <div>
                <label class="block mb-2 text-sm font-medium" for="">nom</label>
                <input type="text" formControlName="nom" name="nom" class="block w-full p-2.5 text-sm bg-white border-gray-300 border rounded-lg focus:ring-blue-500 focus:border-blue-500"/>
              </div>

              <!-- description -->
              <div>
                <label class="block mb-2 text-sm font-medium" for="">description</label>
                <textarea formControlName="description" name="description" class="block w-full p-2.5 text-sm bg-white border-gray-300 border rounded-lg focus:ring-blue-500 focus:border-blue-500" ></textarea>
              </div>

            </div>
            <button type="submit" class="w-full mt-5 rounded-md bg-blue-600 text-center py-3 text-white">
              modifier
            </button>
          </form>
    </p-dialog>
    <!-- end permission edit form popup -->

    <p-toast />
    <p-confirmdialog />